# Маршрутизация обмена

Карта обмена является неотъемлемый частью в успешном обмене.
Карта позволяет связать данные из источника в сущность, в которую вставляются данные.

Каждый класс описывающий свойство принимающее участие в обмене, должен реализовывать интерфейс
**Sholokhov\Exchange\Fields\FieldInterface**

Разберем пример, который продемонстрирует легкость настройки.

```php
use Sholokhov\Exchange\Fields\Field;
use Sholokhov\Exchange\Factory\Exchange\MapperFactory;

$source = [
    [
        'name' => 'Название элемента',
        'price' => 15.2
    ],
    [
        'name' => 'Еще какой-то товар',
        'price' => 17.2,
    ],
    [
        'name' => 'Хороший товар',
        'price' => 15.2,
        'image' => 'https://example/upload/image.png'
    ]
];

$map = [
    (new Field)
        ->setFrom('name')
        ->setTo('NAME')
        ->setPrimary(),
    (new Field)
        ->setFrom('image')
        ->setTo('PREVIEW_PICTURE')
];

$repository = MapperFactory::create();
$repository->setFields($map);

$exchange->setMappingRegistry($repository);
```

Из примера можно заметить, что метод **setFrom** отвечает за данные из источника данных, а метод **setTo** за свойства, которые относятся к сущности в которую производим импорт.

Именно данная связь является основополагающей, для организации корректного обмена. Можем заметить, что в карте мы пытаемся получить изображения,
но не у всех импортируемых элементов оно есть - тут нет нечего страшного, ведь он просто будет иметь пустое значение, и не вызовет исключение или иного отклонения в работе обмена.

Если вы внимательный читатель, то могли обратить внимание на сеттер **setPrimary** - указывает, что данное поле является ключевым на основе которого будет происходит поиск других элементов, и приниматься решение необходимости добавления или обновления.

