"use strict";(self["webpackChunkdocumentation"]=self["webpackChunkdocumentation"]||[]).push([[594],{767:function(e,n,t){t.d(n,{A:function(){return o}});var l=t(6768),a=t(4232),r=t(2690),u={__name:"AlertMessage",props:{type:{type:String,default:()=>r.A.info}},setup(e){return(n,t)=>((0,l.uX)(),(0,l.CE)("div",{class:(0,a.C4)(["alert mt-2",e.type]),role:"alert"},[(0,l.Lk)("p",null,[(0,l.Lk)("b",null,[(0,l.RG)(n.$slots,"header")])]),(0,l.RG)(n.$slots,"default")],2))}};const s=u;var o=s},1260:function(e,n,t){t.d(n,{A:function(){return s}});var l=t(6768);const a=["href"];var r={__name:"ApiLink",props:{path:{type:String,required:!0}},setup(e){const n=e,t=(0,l.EW)((()=>"./api/"+n.path));return(e,n)=>((0,l.uX)(),(0,l.CE)("a",{href:t.value,target:"_blank"},[(0,l.RG)(e.$slots,"default")],8,a))}};const u=r;var s=u},1332:function(e,n,t){t.d(n,{A:function(){return g}});var l=t(6768),a=t(1387),r=t(144),u=t(4232);const s={key:0};var o={__name:"NodeTree",props:{item:{type:Array,default:()=>[]}},emits:["click"],setup(e,{emit:n}){const t=(0,a.lq)(),o=n,c=e=>({name:t.name,params:{hash:e.hash}}),i=e=>{t.params.hash===e&&o("click",e)};return(n,t)=>{const h=(0,l.g2)("node-tree",!0);return(0,l.uX)(),(0,l.CE)("li",null,[(0,l.bF)((0,r.R1)(a.Wk),{to:c(e.item),onClick:t[0]||(t[0]=n=>i(e.item.hash))},{default:(0,l.k6)((()=>[(0,l.eW)((0,u.v_)(e.item.title),1)])),_:1},8,["to"]),e.item.children&&e.item.children.length?((0,l.uX)(),(0,l.CE)("ul",s,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.item.children,(e=>((0,l.uX)(),(0,l.Wv)(h,{key:e.title,item:e,onClick:t[1]||(t[1]=e=>o("click",e))},null,8,["item"])))),128))])):(0,l.Q3)("",!0)])}}};const c=o;var i=c;const h={class:"table-contents"};var d={__name:"TableContents",props:{items:{type:Array,default:()=>[]}},setup(e){const n=(0,a.lq)();(0,l.sV)((()=>{n.params?.hash&&t(n.params.hash)})),(0,l.wB)((()=>n.path),(()=>t(n.params.hash)));const t=e=>{setTimeout((()=>document.getElementById(e)?.scrollIntoView({behavior:"smooth"})),400)};return(n,a)=>((0,l.uX)(),(0,l.CE)("ul",h,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.items,(e=>((0,l.uX)(),(0,l.Wv)(i,{key:e.title,item:e,onClick:t},null,8,["item"])))),128))]))}},p=t(1241);const k=(0,p.A)(d,[["__scopeId","data-v-3bed10b0"]]);var g=k},2241:function(e,n,t){t.d(n,{A:function(){return c}});var l=t(6768);const a={class:"mb-5"};function r(e,n){return(0,l.uX)(),(0,l.CE)("article",a,[(0,l.Lk)("header",null,[(0,l.RG)(e.$slots,"header")]),(0,l.Lk)("main",null,[(0,l.RG)(e.$slots,"default")])])}var u=t(1241);const s={},o=(0,u.A)(s,[["render",r]]);var c=o},2462:function(e,n,t){t.d(n,{A:function(){return o}});var l=t(6768),a=t(144),r=t(6678),u={__name:"CodeBlock",props:{code:{type:String,required:!0},lang:{type:String,default:()=>"php"}},setup(e){return(n,t)=>((0,l.uX)(),(0,l.Wv)((0,a.R1)(r.Pp),(0,l.v6)({code:e.code,lang:e.lang,highlightjs:"",theme:"stackoverflow-dark"},n.$attrs),null,16,["code","lang"]))}};const s=u;var o=s},2690:function(e,n){n.A={info:"alert-info",warning:"alert-warning",danger:"alert-danger",success:"alert-success"}},4039:function(e,n,t){t.d(n,{A:function(){return h}});var l=t(6768);const a={class:"card mt-5 mb-5"},r={class:"card-body"},u={class:"card-text"};function s(e,n){return(0,l.uX)(),(0,l.CE)("section",a,[(0,l.Lk)("div",r,[(0,l.RG)(e.$slots,"header"),(0,l.Lk)("div",u,[(0,l.RG)(e.$slots,"default")])])])}var o=t(1241);const c={},i=(0,o.A)(c,[["render",s]]);var h=i},5594:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var l=t(6768),a=t(144),r=t(2241),u=t(2462);const s="\nuse Ramsey\\Uuid\\Uuid;\n\n$config = [\n    'hash' => 'your_exchange_id'\n];\n\nnew Exchange($config);\n\n\n$config2 = [\n    'hash' => Uuid::uuid5(Uuid::NAMESPACE_OID, 'my-key')->toString(),\n];\n\nnew Exchange($config2);\n",o="\n$config = [\n    'deactivate' => true,\n];\n\nnew Exchange($config);\n",c="\n$exchange = new Exchange;\n$exchange->setResultRepository($callback);\n",i="\nuse Sholokhov\\Exchange\\Fields\\Field;\nuse Sholokhov\\Exchange\\Fields\\IBlock\\IBlockElementField;\n\n$source = [\n    [\n        'name' => 'Название элемента',\n        'price' => 15.2\n    ],\n    [\n        'name' => 'Еще какой-то товар',\n        'price' => 17.2,\n    ],\n    [\n        'name' => 'Хороший товар',\n        'price' => 15.2,\n        'image' => 'https://example/upload/image.png'\n    ]\n];\n\n$map = [\n    (new Field)\n        ->setFrom('name')\n        ->setTo('NAME')\n        ->setPrimary(),\n    (new IBlockElementField)\n        ->setFrom('image')\n        ->setTo('MORE_PHOTO')\n];\n\n$exchange->setMap($map);\n$exchange->execute($source);\n",h="\n/** @var Psr\\Log\\LoggerInterface $logger **/\n$logger = new YourLogger;\n\n$exchange = new Exchange;\n$exchange->setLogger($logger);\n",d="\n// Будет вызываться вторым\n$exchange->addPrepared($myPreparation);\n\n// Будет вызываться первым\n$exchange->addPrepared($preparation2);\n";var p=t(1332),k=t(1260),g=t(767),f=t(4039),m=t(2690),L={__name:"ConfigurationPage",setup(e){const n=(0,a.Kh)({tableContents:[{title:"Введение",hash:"vvedenie"},{title:"Идентификатор обмена",hash:"hash"},{title:"Включение деактивации",hash:"on-deactivate"},{title:"Результат обмена",hash:"set-result"},{title:"Карта обмена",hash:"map"},{title:"Логирование",hash:"logger"},{title:"Преобразователь",hash:"preparation"}]});return(e,t)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(r.A,null,{default:(0,l.k6)((()=>[t[0]||(t[0]=(0,l.Lk)("h2",null,"Конфигурирование",-1)),(0,l.bF)(p.A,{items:n.tableContents},null,8,["items"])])),_:1}),(0,l.bF)(f.A,null,{header:(0,l.k6)((()=>t[1]||(t[1]=[(0,l.Lk)("h2",{id:"vvedenie"},"Введение",-1)]))),default:(0,l.k6)((()=>[t[2]||(t[2]=(0,l.Lk)("p",null,[(0,l.eW)(" Все основные конфигурации обмена указываются в его конструктор. "),(0,l.Lk)("br"),(0,l.eW)(" Конфигурация представляет собой ассоциативный массив. Конфигурация обмена является защищенной на чтение и изменение из вне. После передачи конфигурации в конструктор обмена мы больше не сможем их скорректировать и прочитать. Могут встречаться частные случае, когда пользователю предоставляется возможность переопределить конфигурацию "),(0,l.Lk)("br"),(0,l.eW)(" Конфигурация позволяет настроить поведение вашего обмена и указать куда производится обмен. Если указать некорректную конфигурацию, то при инициализации обмена мы можем получить исключение - стоит учесть данный момент. ")],-1)),t[3]||(t[3]=(0,l.Lk)("p",null,[(0,l.eW)(" Все стандартные обмены являются наследниками класса "),(0,l.Lk)("a",{href:"./api/classes/Sholokhov-Exchange-Exchange.html",target:"_blank"},"Exchange"),(0,l.eW)(", который позволяет настроить: ")],-1)),t[4]||(t[4]=(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,"Включение деактивации"),(0,l.Lk)("li",null,"Результат обмена"),(0,l.Lk)("li",null,"Карта обмена")],-1)),t[5]||(t[5]=(0,l.Lk)("p",null," Каждый отдельно взятый обмен содержит свои доступные параметры и значения. Все доступные обмены описаны в блоке импорт. ",-1))])),_:1}),(0,l.bF)(f.A,null,{default:(0,l.k6)((()=>[t[8]||(t[8]=(0,l.Lk)("h2",{id:"hash"},"Идентификатор обмена",-1)),t[9]||(t[9]=(0,l.Lk)("p",null," Идентификатор обмена служит, для разграничения данных с которыми идет взаимодействия и обеспечить корректную работу обмена с одной сущностью одновременно. ",-1)),(0,l.bF)(g.A,null,{default:(0,l.k6)((()=>t[6]||(t[6]=[(0,l.eW)(" Для избежания конфликтов ситуаций рекомендуется указывать уникальный идентификатор обмена ")]))),_:1}),(0,l.bF)(g.A,{type:(0,a.R1)(m.A).warning},{default:(0,l.k6)((()=>t[7]||(t[7]=[(0,l.eW)(" Не каждый обмен поддерживает разграничение данных на основе идентификатора. Перед использованием необходимо ознакомиться с документацией используемого обмена ")]))),_:1},8,["type"]),t[10]||(t[10]=(0,l.Lk)("p",null," Одним из возможных ситуаций по которой следует указывать идентификатор - несколько импортов в одну сущность и работа только со своими элементами сущности ",-1)),(0,l.bF)(u.A,{code:(0,a.R1)(s)},null,8,["code"])])),_:1}),(0,l.bF)(f.A,null,{default:(0,l.k6)((()=>[t[11]||(t[11]=(0,l.Lk)("h3",{id:"on-deactivate"},"Включение деактивации",-1)),t[12]||(t[12]=(0,l.Lk)("p",null,[(0,l.eW)(" После обмена данных производит деактивацию всех значений, которые не приняли участие. "),(0,l.Lk)("br"),(0,l.eW)(" По умолчанию деактивацию отключена. Логика деактивации регламентируется наследником, и она не является обязательной. Если наследник откажется реализовывать данный функционал, то данный флаг не повлияет на результат обмена. ")],-1)),(0,l.bF)(u.A,{code:(0,a.R1)(o)},null,8,["code"])])),_:1}),(0,l.bF)(f.A,null,{header:(0,l.k6)((()=>t[13]||(t[13]=[(0,l.Lk)("h2",{id:"set-result"},"Результат обмена",-1)]))),default:(0,l.k6)((()=>[t[14]||(t[14]=(0,l.Lk)("p",null,[(0,l.eW)(" Каждый обмен обязан вернуть объект результата выполнения, который реализует интерфейс "),(0,l.Lk)("a",{href:"./api/classes/Sholokhov-Exchange-Messages-ExchangeResultInterface.html",target:"_blank"},"ExchangeResultInterface"),(0,l.Lk)("br"),(0,l.eW)(" Результат содержит все ошибки, которые возникли и все идентификаторы значений, которые принимали участие в импорте\\экспорте. В угоду оптимизации по умолчанию результат не хранит идентификаторы значений, и для этого нам необходимо сконфигурировать обмен. "),(0,l.Lk)("br")],-1)),(0,l.bF)(u.A,{code:(0,a.R1)(c)},null,8,["code"]),t[15]||(t[15]=(0,l.Lk)("p",null,[(0,l.eW)(" Метод "),(0,l.Lk)("b",null,"setResultRepository"),(0,l.eW)(" принимает значение, которое является "),(0,l.Lk)("a",{href:"https://www.php.net/manual/en/language.types.callable.php",target:"_blank"},"callable"),(0,l.eW)(", и вернет новый объект хранилища реализующий интерфейс "),(0,l.Lk)("a",{href:"./api/classes/Sholokhov-Exchange-Repository-Result-ResultRepositoryInterface.html",target:"_blank"},"ResultRepositoryInterface"),(0,l.eW)(". ")],-1))])),_:1}),(0,l.bF)(f.A,null,{default:(0,l.k6)((()=>[t[16]||(t[16]=(0,l.Lk)("h2",{id:"map"},"Карта обмена",-1)),t[17]||(t[17]=(0,l.Lk)("p",null,[(0,l.eW)(" Карта обмена указывается через отдельный сеттер "),(0,l.Lk)("b",null,"setMap"),(0,l.eW)(", который ожидает массив объектов описывающих связи. "),(0,l.Lk)("br"),(0,l.eW)(" Разберем простой пример импорта элементов информационного блока: Необходимо импортировать название элемента и изображение в пользовательское свойство. ")],-1)),(0,l.bF)(u.A,{code:(0,a.R1)(i)},null,8,["code"])])),_:1}),(0,l.bF)(f.A,null,{default:(0,l.k6)((()=>[t[18]||(t[18]=(0,l.Lk)("h2",{id:"logger"},"Логирование",-1)),t[19]||(t[19]=(0,l.Lk)("p",null,[(0,l.eW)(" Каждый обмен обязан производить логирование результата своей работы. Логирование реализована посредством "),(0,l.Lk)("a",{href:"https://www.php-fig.org/psr/psr-3/",target:"_blank"},"PSR-3"),(0,l.eW)(", и позволяет использовать произвольный механизм журналирования. "),(0,l.Lk)("br"),(0,l.eW)(" Обмен по умолчанию не инициализирует механизм логирования, а производит делегирование на разработчика, который подключает обмен. "),(0,l.Lk)("br"),(0,l.eW)(" Рассмотрим пример указания произвольного механизма журналирования ")],-1)),(0,l.bF)(u.A,{code:(0,a.R1)(h)},null,8,["code"])])),_:1}),(0,l.bF)(f.A,null,{default:(0,l.k6)((()=>[t[25]||(t[25]=(0,l.Lk)("h2",{id:"preparation"},"Преобразователь",-1)),t[26]||(t[26]=(0,l.Lk)("p",null,[(0,l.eW)(" Преобразователь данных работает с нормализованными данными(обработанными и приведенными к типу данных с которой умеет работать сущность). "),(0,l.Lk)("br"),(0,l.eW)(" Основное предназначение преобразователя: ")],-1)),t[27]||(t[27]=(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,"Изменение типа данных"),(0,l.Lk)("li",null,"Запуск вложенного импорта, если значение свойства связано с другой сущностью")],-1)),(0,l.Lk)("p",null,[t[22]||(t[22]=(0,l.eW)(" Все стандартные обмены имеют свой набор зарегистрированных преобразователей. Обмен дает возможность указать свои пользовательские преобразователи, которые будут вызываться в первую очередь. Преобразователь реализовывает интерфейс ")),(0,l.bF)(k.A,{path:"classes/Sholokhov-Exchange-Preparation-PreparationInterface.html"},{default:(0,l.k6)((()=>t[20]||(t[20]=[(0,l.eW)("PreparationInterface")]))),_:1}),t[23]||(t[23]=(0,l.eW)(". ")),t[24]||(t[24]=(0,l.Lk)("br",null,null,-1)),(0,l.bF)(g.A,null,{default:(0,l.k6)((()=>t[21]||(t[21]=[(0,l.eW)(" Вызывается "),(0,l.Lk)("b",null,"только первый",-1),(0,l.eW)(" подходящий преобразователь ")]))),_:1})]),(0,l.bF)(u.A,{code:(0,a.R1)(d)},null,8,["code"])])),_:1})],64))}};const b=L;var v=b}}]);
//# sourceMappingURL=594.a501b200.js.map